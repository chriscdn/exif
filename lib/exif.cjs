var e=require("exifr"),t=require("luxon"),n=require("tz-lookup");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var l=/*#__PURE__*/i(e),u=/*#__PURE__*/i(n),o=l.default.parse;module.exports=function(e){try{var n={latitude:null,longitude:null,timeZone:null,localTime:null,timestamp:null,timeZoneOffsetInMinutes:null,description:null,width:0,height:0,isPrecise:!1};return Promise.resolve(o(e,!0)).then(function(i){var l,o,a,s,c,f,h;n.latitude=null!=(l=i.latitude)?l:null,n.longitude=null!=(o=i.longitude)?o:null,n.latitude&&n.longitude&&(n.timeZone=u.default(n.latitude,n.longitude));var d=null!=(a=i.ImageDescription)?a:null;n.description=d?String(d).trim():null;var g,m,v,p=null!=(s=i.DateTimeOriginal)?s:null,w=null!=(c=i.OffsetTimeOriginal)?c:null;if((v=p)instanceof Date||"object"==typeof v&&"[object Date]"===Object.prototype.toString.call(v)){var y=n.timeZone,P=w?(g=w.split(":"),-(60*(m=parseInt(g[0]))+(m>0?1:-1)*parseInt(g[1]))):null;n.isPrecise=Boolean(y)||Boolean(P);var b=t.DateTime.utc(p.getFullYear(),p.getMonth()+1,p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds()).plus({minutes:null!=P?P:void 0}).setZone(null!=y?y:void 0,{keepLocalTime:void 0===P});n.timestamp=b.toMillis(),n.timeZoneOffsetInMinutes=P?-P:b.offset,n.localTime=b.toFormat("yyyy-MM-dd'T'HH:mm:ss")}n.width=null!=(f=i.ExifImageWidth)?f:null,n.height=null!=(h=i.ExifImageHeight)?h:null;var O=function(){if(!n.width&&!n.height){var t=function(){if("string"==typeof e)return Promise.resolve(Promise.resolve().then(function(){/*#__PURE__*/return r(require("probe-image-size"))})).then(function(t){return Promise.resolve((0,t.default)(e)).then(function(e){null!=e&&e.width&&null!=e&&e.height&&(n.width=e.width,n.height=e.height)})});var t=function(){if(window&&"string"!=typeof e)return Promise.resolve(function(e){try{return Promise.resolve(new Promise(function(t){var n=window.URL||window.webkitURL,i=new Image;i.onload=function(){t({width:i.width,height:i.height})},i.src=n.createObjectURL(e)}))}catch(e){return Promise.reject(e)}}(e)).then(function(e){n.width=e.width,n.height=e.height})}();return t&&t.then?t.then(function(){}):void 0}();if(t&&t.then)return t.then(function(){})}}();return O&&O.then?O.then(function(){return n}):n})}catch(e){return Promise.reject(e)}};
//# sourceMappingURL=exif.cjs.map
