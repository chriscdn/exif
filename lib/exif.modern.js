import t from"exifr";import{DateTime as e}from"luxon";import i from"tz-lookup";const{parse:l}=t,n=async t=>{var n,o,u,s,a,r,d;const g={latitude:null,longitude:null,timeZone:null,localTime:null,timestamp:null,timeZoneOffsetInMinutes:null,description:null,width:0,height:0,isPrecise:!1},h=await l(t,!0);g.latitude=null!=(n=h.latitude)?n:null,g.longitude=null!=(o=h.longitude)?o:null,g.latitude&&g.longitude&&(g.timeZone=i(g.latitude,g.longitude));const c=null!=(u=h.ImageDescription)?u:null;g.description=c?String(c).trim():null;const m=null!=(s=h.DateTimeOriginal)?s:null,f=null!=(a=h.OffsetTimeOriginal)?a:null;if((p=m)instanceof Date||"object"==typeof p&&"[object Date]"===Object.prototype.toString.call(p)){const t=g.timeZone,i=f?-function(t){const e=t.split(":"),i=parseInt(e[0]);return 60*i+(i>0?1:-1)*parseInt(e[1])}(f):null;g.isPrecise=Boolean(t)||Boolean(i);const l=e.utc(m.getFullYear(),m.getMonth()+1,m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds()).plus({minutes:null!=i?i:void 0}).setZone(null!=t?t:void 0,{keepLocalTime:void 0===i});g.timestamp=l.toMillis(),g.timeZoneOffsetInMinutes=i?-i:l.offset,g.localTime=l.toFormat("yyyy-MM-dd'T'HH:mm:ss")}var p;if(g.width=null!=(r=h.ExifImageWidth)?r:null,g.height=null!=(d=h.ExifImageHeight)?d:null,!g.width&&!g.height)if("string"==typeof t){const{default:e}=await import("probe-image-size"),i=await e(t);null!=i&&i.width&&null!=i&&i.height&&(g.width=i.width,g.height=i.height)}else if(window&&"string"!=typeof t){const e=await async function(t){return new Promise(e=>{const i=window.URL||window.webkitURL,l=new Image;l.onload=()=>{e({width:l.width,height:l.height})},l.src=i.createObjectURL(t)})}(t);g.width=e.width,g.height=e.height}return g};export{n as default};
//# sourceMappingURL=exif.modern.js.map
